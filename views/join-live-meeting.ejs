<!DOCTYPE html>
<html lang="<%= lang %>">
<head>
  <%- include('includes/head') %>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <%- include('includes/header') %>
  <div class="container" style="margin-top:40px;">
    <h1>Join a Live Meeting</h1>
    <form action="/live-meetings/join" method="get" class="mt-3">
      <div class="form-group">
        <label for="meetingId">Meeting ID or Link</label>
        <input type="text" class="form-control" id="meetingId" name="meetingId" required placeholder="Enter meeting ID or URL">
      </div>
      <button type="submit" class="btn btn-primary mt-2">Join</button>
    </form>
    <p class="mt-2 text-muted">Don't know the ID? Below is a list of available sessions with their IDs/links:</p>
    <p class="mt-3 text-muted">If you have a full link, just paste it above. We'll extract the ID automatically.</p>

    <% if (typeof meetings !== 'undefined' && meetings.length) { %>
      <hr>
      <h2>Available meetings</h2>
      <ul class="list-group">
        <% meetings.forEach(m => { %>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <strong><%= m.title || 'Untitled' %></strong>
              <% if (m.scheduled_at) { %> â€“ <%= new Date(m.scheduled_at).toLocaleString() %><% } %>
              <% if (m.status) { %> [<%= m.status %>]<% } %>
            </div>
            <div>
              <% if (m.meeting_link) { %>
                <a href="<%= m.meeting_link %>" class="btn btn-sm btn-success" target="_blank">Join</a>
              <% } else { %>
                <span class="text-muted">ID: <%= m.id %></span>
              <% } %>
            </div>
          </li>
        <% }); %>
      </ul>
    <% } %>

  </div>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
  <%- include('includes/head') %>
  <body>
    <%- include('includes/header') %>

    <main>
      <h6>Dream Dictionary</h6>
      <p>
        Explore the meanings of various words in your dreams.  
        Choose whether to add a new entry or search existing ones.  
        If you want to see the collection of dream posts, press <a href="/dashboard">here</a>.
      </p>

      <% if (typeof errors !== 'undefined' && errors.length) { %>
        <% errors.forEach(function(error) { %>
          <p class="notice"><%= error %></p>
        <% }) %>
      <% } %>

      <% if (typeof success !== 'undefined' && success) { %>
        <p class="notice"><%= success %></p>
      <% } %>

      <!-- Radio buttons to choose action -->
      <fieldset>
        <legend>Choose Action</legend>
        <label>
          <input type="radio" name="action" value="add">
          Add Dream Meaning to dream dictionary
        </label>
        <label>
          <input type="radio" name="action" value="search">
          Search Dream Meaning
        </label>
      </fieldset>

      <!-- Add Dream Meaning Form -->
      <form id="addForm" action="/dictionary" method="POST" style="display:none;">
        <fieldset>
          <legend>Post Dream Meaning</legend>
          <input type="text" name="term" placeholder="Enter a word" required>
          <input type="text" name="meaning" placeholder="Enter the meaning" required>
          <button type="submit" name="action" value="add">Add</button>
        </fieldset>
      </form>

      <!-- Search Dream Meaning Form -->
      <form id="searchForm" action="/dictionary" method="POST" style="display:none;">
        <fieldset>
          <legend>Search Dream Meaning</legend>
          <div class="form-group">
            <label for="search">Enter a word to find dream meanings:</label>
            <input type="text" id="search" name="term" placeholder="e.g. snake, water, flying" required>
          </div>
          <button type="submit" name="action" value="search">Search</button>
        </fieldset>
      </form>
    </main>

    <%- include('includes/footer') %>

    <script>
      // Get references
      const actionRadios = document.querySelectorAll('input[name="action"]');
      const addForm = document.getElementById('addForm');
      const searchForm = document.getElementById('searchForm');

      // Hide both initially
      addForm.style.display = 'none';
      searchForm.style.display = 'none';

      // Listen for radio changes
      actionRadios.forEach(radio => {
        radio.addEventListener('change', () => {
          if (radio.value === 'add') {
            addForm.style.display = 'block';
            searchForm.style.display = 'none';
          } else if (radio.value === 'search') {
            searchForm.style.display = 'block';
            addForm.style.display = 'none';
          }
        });
      });
    </script>
  </body>
</html>

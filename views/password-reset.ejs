<!-- views/password-reset.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Password Reset</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 500px; margin: 50px auto; }
    h1 { text-align: center; }
    form { display: flex; flex-direction: column; gap: 15px; }
    input { padding: 10px; font-size: 16px; width: 100%; }
    button { padding: 10px; font-size: 16px; cursor: pointer; }
    .errors { color: red; list-style: none; padding: 0; }
    .success { color: green; text-align: center; }
  </style>
</head>
<body>
  <h1>Password Reset</h1>

  <% if (errors && errors.length > 0) { %>
    <ul class="errors">
      <% errors.forEach(err => { %>
        <li><%= err %></li>
      <% }) %>
    </ul>
  <% } %>

  <% if (typeof success !== 'undefined') { %>
    <p class="success"><%= success %></p>
  <% } %>

  <% if (!token) { %>
    <!-- Step 1: Request password reset -->
    <form action="/password-reset" method="POST">
      <input type="email" name="email" placeholder="Enter your email" required>
      <button type="submit">Send Reset Link</button>
    </form>
  <% } else { %>
    <!-- Step 2: Set new password -->
    <form action="/reset-password/confirm" method="POST">
      <input type="hidden" name="token" value="<%= token %>">
      <input type="password" name="password" placeholder="Enter new password" required>
      <button type="submit">Reset Password</button>
    </form>
  <% } %>
</body>
</html>
